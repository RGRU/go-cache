Язык: [English](https://github.com/RGRU/go-memorycache) | Русский

# Go-memorycache [![Build Status](https://travis-ci.org/RGRU/go-memorycache.svg?branch=master)](https://travis-ci.org/RGRU/go-memorycache)

Менеджер кеша в памяти на Golang, хранилище данных в формате ключ/значение


## Как установить?
```html
	go get github.com/RGRU/go-memorycache
```

## Как использовать?

1. Необходимо импортировать пакет
```html
	import (
		memorycache "github.com/RGRU/go-memorycache"
	)
```

2. Инициализировать кеш
```html
	// Создаем кеш с временем жизни по-умолчанию равным 5 минут и удалением просроченного кеша каждые 10 минут
	cache := memorycache.New(5 * time.Minute, 10 * time.Minute)
```

3. Использовать
```html
	// Установить кеш с ключем "myKey" и временем жизни 5 минут
	cache.Set("myKey", "My value", 5 * time.Minute)

	// Получить кеш с ключем "myKey"
	cache.Get("myKey")
```

## Полный список методов  

| Метод | Описание  | Пример использования |
|:--        |:--   |:--          |
| New | Инициализация нового экземпляра кеша. Принимает два аргументы defaultExpiration и cleanupInterval. defaultExpiration - время жизни кеша по-умолчанию, если установлено значение <= 0, время жизни кеша  бессрочно. cleanupInterval - интервал между удалением просроченного кеша. Внимание! не рекомендуется устанавливать небольшие значения для этого аргумента. Если установлено значение <= 0, очистка и удаление просроченного кеша не происходит | cache := memorycache.New(5 * time.Minute, 10 * time.Minute) |
| Set | Добавить элемент в кэш, создав новый или заменив любой существующий элемент. Если duration (продолжительность) равна 0 - используется время истечения по умолчанию (defaultExpiration), если -1 элемент устанавливается бессрочно | cache.Set("myKey", "My value", 5 * time.Minute) |
| Get | Получение значения кеша по ключу. Возвращает значение или nil, второй параметр bool указывает был ли найден ключ - true в случае успешного получения, false если значение не найдено или кеш устарел | value, found := cache.Get("myKey") |
|GetLikeKey | Получение списка значений с возможностью фильтрации по имени ключа. В имени ключа можно использовать специалиный символ %, который работает как оператор LIKE в Mysql. Возвращает список значений или nil, второй параметр bool указывает были ли найдены ключи - true в случае успешного получения, false если ни один ключ не соответствует фильтру | values, found := cache.GetLikeKey("findkey%") |
|GetCount | Возвращает количество элементов в кеше. Сюда входят только действующие ключи, у которых не истек срок жизни | count := cache.GetCount() |
|GetItem | Получение элемента кеша. Возвращает Value (значение), Duration (время жизни), Created (время создания), Expiration (продолжительность жизни), второй параметр bool указывает был ли найден ключ | item, found := cache.GetItem(testKey) |
| Delete | Удаление кеша по ключу. Вернет ошибку при попытки удалить не существующий ключ | cache.Delete("myKey") |
|Rename | Переименование ключа. Вернет ошибку: если новое имя ключа совпадает со старым; ключ с новым именем уже существует; ключ не существует | error := cache.Rename("keyOldName", "keyNewName") |
|Copy | Копирование кеша. Вернет ошибку: если названия ключей совпадают; ключ реципиент уже существует; ключ донор не существует | error := cache.Copy("oneKey", "oneKeyCopy") |
| Exist | Проверка кеша на существование. Вернет true если кеш существует. | exist := cache.Exist("myKey") |
| Expire | Проверка кеша на истечение срока жизни. Вернет true если время жизни кеша истекло | expire := cache.Expire("myKey") |
| FlushAll | Очистка всех данных. Вернет ошибку в случае если очистка не возможна | flush := cache.FlushAll() |
